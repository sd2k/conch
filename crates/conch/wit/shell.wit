package conch:shell@0.1.0;

/// The conch shell sandbox world.
///
/// This defines the interface between the host (Rust) and the guest (shell WASM).
/// The guest exports an execute function that runs shell scripts.
/// Standard WASI interfaces are used for filesystem, stdio, and clocks.
///
/// Note: stdout/stderr are captured by the host via WASI pipes, not returned
/// in the execute result. The shell writes directly to WASI stdout/stderr.
world shell {
    /// Execute a shell script in the sandbox.
    ///
    /// The script is interpreted as bash-compatible shell code.
    /// Standard builtins like echo, cat, grep, jq, head, tail are available.
    ///
    /// Returns the exit code on success, or an error message if the shell
    /// itself failed to initialize or execute (not script errors).
    export execute: func(script: string) -> result<s32, string>;
}
